var jsXtract=function(){function a(a,c){return a.find(function(a){for(var b in c)if(a[b]!==c[b])return!1;return!0})}function c(a){var c=n._malloc(a.length*a.BYTES_PER_ELEMENT);a.constructor==Float32Array?n.HEAPF32.set(a,c>>2):a.constructor==Float64Array&&n.HEAPF64.set(a,c>>4);return c}function b(a,c,b){if("fp32"==a)a=new Float32Array(n.HEAPF32.subarray(c>>2,(c>>2)+b));else if("fp64"==a)a=new Float64Array(n.HEAPF32.subarray(c>>4,(c>>4)+b));else throw"Invalid types";n._free(c);return a}function d(a){if(!xtract_assert_array(a))return 0;
if(a.reduce)return a.reduce(function(a,c){return a+c},0);for(var c=0,b=a.length,d=0;d<b;d++)c+=a[d];return c}function e(a){if(!xtract_assert_array(a))return-Infinity;if(a.reduce)return a.reduce(function(a,c){return c>a?c:a},a[0]);for(var c=a[0],b=a.length,d=1;d<b;d++)a[d]>c&&(c=a[d]);return c}function f(a){if(!xtract_assert_array(a))return Infinity;if(a.reduce)return a.reduce(function(a,c){return c<a?c:a},a[0]);for(var c=Infinity,b=a.length,d=0;d<b;d++)a[d]<c&&(c=a[d]);return c}function g(a,c){if(!xtract_assert_array(a))return 0;
"number"!==typeof c&&(c=xtract_mean(a));var b=0;if(a.reduce)b=a.reduce(function(a,b){return a+=Math.pow(b-c,2)},0);else for(var d=0;d<a.length;d++)b+=Math.pow(a[d]-c,2);return b/=a.length-1}function h(a,c){if(!xtract_assert_array(a))return 0;"number"!==typeof c&&(c=xtract_mean(a));var b=0;if(a.reduce)b=a.reduce(function(a,b){return a+Math.abs(b-c)},0);else for(var d=0;d<a.length;d++)b+=Math.abs(a[d]-c);return b/a.length}function k(a){if(!xtract_assert_array(a))return 0;for(var c=a.length,b=new Float64Array(c);c--;){for(var d=
0,e=0;e<a.length-c;e++)d+=a[e]*a[e+c];b[c]=d/a.length}return b}var l={parent:this,store:[],createCoefficients:function(c){var b=a(this.store,{N:c});b||(b={N:c,data:xtract_init_dct(c)},this.store.push(b));return b.data}},m={parent:this,store:[],createCoefficients:function(c,b,d,e,f,k){var g={N:c,nyquist:b,style:d,freq_min:e,freq_max:f,freq_bands:k},h=a(this.store,g);h||(h=g,h.data=xtract_init_mfcc(c,b,d,e,f,k),this.store.push(h));return h.data}},p={parent:this,store:[],createCoefficients:function(c,
b,d){var e={N:c,sampleRate:b,numBands:d},f=a(this.store,e);f||(f=e,f.data=xtract_init_bark(c,b,d),this.store.push(f));return f.data}},q={parent:this,store:[],createCoefficients:function(c,b,d,e,f,k){var g={N:c,sampleRate:b,nbins:d,A440:e,f_ctr:f,octwidth:k},h=a(this.store,g);h||(h=g,h.data=xtract_init_chroma(c,b,d,e,f,k),this.store.push(h));return h.data}},n;if(void 0!==window.WebAssembly){var u=function(a){window.Module={};window.Module.wasmBinary=a;window.Module.postRun=[w];a=document.createElement("script");
a.setAttribute("src","jsXtract-wasm.js");document.querySelector("head").appendChild(a)},w=function(){n=window.Module;n.xtract_array_sum={};n.xtract_array_sum.fp32=n.cwrap("xtract_array_sum_fp32","number",["array","number"]);n.xtract_array_sum.fp64=n.cwrap("xtract_array_sum_fp64","number",["array","number"]);n.xtract_array_max={};n.xtract_array_max.fp32=n.cwrap("xtract_array_max_fp32","number",["array","number"]);n.xtract_array_max.fp64=n.cwrap("xtract_array_max_fp64","number",["array","number"]);
n.xtract_array_min={};n.xtract_array_min.fp32=n.cwrap("xtract_array_min_fp32","number",["array","number"]);n.xtract_array_min.fp64=n.cwrap("xtract_array_min_fp64","number",["array","number"]);n.xtract_array_scale={};n.xtract_array_scale.fp32=n.cwrap("xtract_array_scale_fp32","number",["number","number"]);n.xtract_array_scale.fp64=n.cwrap("xtract_array_scale_fp64","number",["number","number"]);n.xtract_variance={};n.xtract_variance.fp32=n.cwrap("xtract_variance_fp32","number",["array","number"]);n.xtract_variance.fp64=
n.cwrap("xtract_variance_fp64","number",["array","number"]);n.xtract_average_deviation={};n.xtract_average_deviation.fp32=n.cwrap("xtract_average_deviation_fp32","number",["array","number"]);n.xtract_average_deviation.fp64=n.cwrap("xtract_average_deviation_fp64","number",["array","number"]);n.xtract_autocorrelation={};n.xtract_autocorrelation.fp32=n.cwrap("xtract_autocorrelation_fp32","number",["number","number","number"]);n.xtract_autocorrelation.fp64=n.cwrap("xtract_autocorrelation_fp64","number",
["number","number","number"])};if(void 0!==window.fetch)fetch("jsXtract.wasm").then(function(a){return a.arrayBuffer()}).then(u);else{var v=new XMLHttpRequest;v.open("GET","jsXtract.wasm");v.responseType="ArrayBuffer";v.onload=function(a){var c=new Reader;c.onload=u;c.readAsArrayBuffer(a.response)}}}v={};var C={};Object.defineProperties(v,{createDctCoefficients:{value:function(a){return l.createCoefficients(a)}},createMfccCoefficients:{value:function(a,c,b,d,e,f){return m.createCoefficients(a,c,b,
d,e,f)}},createBarkCoefficients:{value:function(a,c,b){if("number"!==typeof b||0>b||26<b)b=26;return p.createCoefficients(a,c,b)}},createChromaCoefficients:{value:function(a,c,b,d,e,f){return q.createCoefficients(a,c,b,d,e,f)}},wasm:{get:function(){return n}},functions:{get:function(){return C}}});Object.defineProperties(C,{array_sum:{value:function(a){if(!n)return d(a);switch(a.constructor){case Float32Array:return n.xtract_array_sum.fp32(new Uint8Array(a.buffer),a.length);case Float64Array:return n.xtract_array_sum.fp64(new Uint8Array(a.buffer),
a.length);default:return d(a)}}},array_max:{value:function(a){if(!n)return e(a);switch(a.constructor){case Float32Array:return n.xtract_array_max.fp32(new Uint8Array(a.buffer),a.length);case Float64Array:return n.xtract_array_max.fp64(new Uint8Array(a.buffer),a.length);default:return e(a)}}},array_min:{value:function(a){if(!n)return f(a);switch(a.constructor){case Float32Array:return n.xtract_array_min.fp32(new Uint8Array(a.buffer),a.length);case Float64Array:return n.xtract_array_min.fp64(new Uint8Array(a.buffer),
a.length);default:return f(a)}}},array_scale:{value:function(a,d){if(n&&(a.constructor==Float32Array||a.constructor==Float64Array)){var e=c(a),f=a.length;if(a.constructor==Float32Array)return n.xtract_array_scale.fp32(e,d,f),b("fp32",e,f);n.xtract_array_scale.fp64(e,d,f);return b("fp64",e,f)}if(xtract_assert_array(a)&&"number"===typeof d){f=a.length;var k=xtract_array_copy(a);for(e=0;e<f;e++)k[e]*=d;e=k}else e=0;return e}},variance:{value:function(a,c){if(!n)return g(a,c);switch(a.constructor){case Float32Array:return n.xtract_variance.fp32(a,
c,a.length);case Float64Array:return n.xtract_variance.fp64(a,c,a.length);default:return g(a,c)}}},average_deviation:{value:function(a,c){if(!n)return h(a,c);switch(a.constructor){case Float32Array:return n.xtract_average_deivation.fp32(a,c,a.length);case Float64Array:return n.xtraxt_average_deviation.fp64(a,c,a.length);default:return h(a,c)}}},autocorrelation:{value:function(a){if(!n)return k(a);var d=n._malloc(a.length*a.BYTES_PER_ELEMENT),e=c(a);switch(a.constructor){case Float32Array:return n.xtract_autocorrelation.fp32(e,
d,a.length),n._free(e),b("fp32",d,a.length);case Float64Array:return n.xtract_autocorrelation.fp64(e,d,a.length),n._free(e),b("fp64",d,a.length);default:return k(a)}}}});return v}();function xtract_is_denormal(a){return 2.2250738585072014E-308>=Math.abs(a)?!0:!1}function xtract_assert_array(a){return"object"===typeof a&&void 0!==a.length&&0<a.length}function xtract_assert_positive_integer(a){return"number"===typeof a&&0<=a&&a===Math.round(a)}
function xtract_array_sum(a){return xtract_assert_array(a)?jsXtract.functions.array_sum(a):0}function xtract_array_copy(a){for(var c=a.length,b=new a.constructor(c),d=0;d<c;d++)b[d]=a[d];return b}function xtract_array_min(a){return xtract_assert_array(a)?jsXtract.functions.array_min(a):0}function xtract_array_max(a){return xtract_assert_array(a)?jsXtract.functions.array_max(a):0}function xtract_array_scale(a,c){return xtract_assert_array(a)?jsXtract.functions.array_scale(a,c):0}
function xtract_array_normalise(a){return xtract_assert_array(a)?xtract_array_scale(a,1/xtract_array_max(a)):0}function xtract_array_bound(a,c,b){if(!xtract_assert_array(a))return 0;"number"!==typeof c&&(c=xtract_array_min(a));"number"!==typeof b&&(b=xtract_array_max(a));if(c>=b)throw"Invalid boundaries! Minimum cannot be greater than maximum";for(var d=new a.constructor(a.length),e=0;e<a.length;e++)d[e]=Math.min(Math.max(a[e],c),b);return d}
function xtract_array_interlace(a){if(!xtract_assert_array(a))return[];var c=a.length,b=a[0].length;if(!1===a.every(function(a){return a.length===b}))throw"All argument lengths must be the same";for(var d=new a[0].constructor(c*b),e=0;e<b;e++)for(var f=0;f<c;f++)d[e*c+f]=a[f][e];return d}
function xtract_array_deinterlace(a,c){if(!xtract_assert_array(a))return[];if(!xtract_assert_positive_integer(c))throw"num_arrays must be a positive integer";var b=[];var d=a.length/c;for(var e=0;e<c;e++)b[e]=new a.constructor(d);for(e=0;e<d;e++)for(var f=0;f<c;f++)b[f][e]=a[e*c+f];return b}
function xtract_get_number_of_frames(a,c){if(!xtract_assert_array(a))throw"Invalid data parameter. Must be item with iterable list";if("number"!==typeof c&&0>=c)throw"Invalid hop_size. Must be positive integer";return Math.floor(a.length/c)}
function xtract_get_data_frames(a,c,b,d){void 0===b&&(b=c);var e=b;if(!xtract_assert_array(a))throw"Invalid data parameter. Must be item with iterable list";if(!xtract_assert_positive_integer(c))throw"xtract_get_data_frames requires the frame_size to be a positive integer";if(!xtract_assert_positive_integer(e))throw"xtract_get_data_frames requires the hop_size to be a positive integer";e=[];for(var f=Math.ceil(a.length/b),g,h=0;h<f;h++){var k=h*b;if(d){g=new Float64Array(c);for(var l=0;l<c&&l+k<a.length;l++)g[l]=
a[l+k]}else if(g=a.subarray(k,k+c),g.length<c){k=new Float64Array(c);for(l=0;l<g.length;l++)k[l]=g[l];g=k}e.push(g)}return e}
function xtract_process_frame_data(a,c,b,d,e,f){a=xtract_get_data_frames(a,d,e);for(var g={num_frames:a.length,results:[]},h=0,k={frame_size:d,hop_size:e,sample_rate:b,TimeData:void 0,SpectrumData:void 0},l,m,p=0;p<a.length;p++){var q=a[p];k.TimeData=q;k.SpectrumData=xtract_spectrum(q,b,!0,!1);m=c.call(f||this,k,l,m);q={time_start:h,result:m};h+=d/b;l=k;k={frame_size:d,hop_size:e,sample_rate:b,TimeData:void 0,SpectrumData:void 0};g.results.push(q)}return g}
function xtract_array_to_JSON(a){if(a.join)return"["+a.join(", ")+"]";a="[";for(var c=0;c<this.length;)a+=this[c],void 0!==this[c+1]&&(a+=","),c++;return a+"]"}
function xtract_frame_from_array(a,c,b,d,e){void 0===e&&(e=d);var f=e;if(!xtract_assert_positive_integer(b))throw"xtract_get_frame requires the index to be an integer value";if(!xtract_assert_positive_integer(d))throw"xtract_get_frame requires the frame_size to be a positive integer";if(!xtract_assert_array(a))throw"Invalid data parameter. Must be item with iterable list";if(!xtract_assert_array(c))throw"dst must be an Array-like object equal in length to frame_size";if(!xtract_assert_positive_integer(f))throw"xtract_get_frame requires the hop_size to be a positive integer";
f=xtract_get_number_of_frames(a,e);if(b>=f)throw"index number "+b+" out of bounds";f=0;for(b*=e;f<c.length&&f<a.length&&f<d;)c[f]=a[f+b],f++;for(;f<c.length;)c[f]=0}function xtract_mean(a){return xtract_assert_array(a)?xtract_array_sum(a)/a.length:0}
function xtract_temporal_centroid(a,c,b){if("number"!==typeof c)console.error("xtract_temporal_centroid requires sample_rate to be a number");else{"number"!==typeof b&&(console.log("xtract_temporal_centroid assuming window_ms = 100ms"),b=100);0>=b&&(b=100);var d=1/c;c*=b/1E3;b=xtract_array_sum(a);for(var e=0,f=0;f<a.length;f++)e+=a[f]*f*c*d;return e/b}}
function xtract_variance(a,c){if(!xtract_assert_array(a))return 0;"number"!==typeof c&&(c=xtract_mean(a));return jsXtract.functions.variance(a,c)}function xtract_standard_deviation(a,c){if(!xtract_assert_array(a))return 0;"number"!==typeof c&&(c=xtract_variance(a));return Math.sqrt(c)}function xtract_average_deviation(a,c){if(!xtract_assert_array(a))return 0;"number"!==typeof c&&(c=xtract_mean(a));return jsXtract.functions.average_deviation(a,c)}
function xtract_skewness_kurtosis(a,c,b){if(!xtract_assert_array(a))return[0,0];"number"!==typeof c&&(c=xtract_mean(a));"number"!==typeof b&&(b=xtract_standard_deviation(a,xtract_variance(a,c)));if(0===b)return[0,0];for(var d=[0,0],e=0;e<a.length;e++)d[0]+=Math.pow((a[e]-c)/b,3),d[1]+=Math.pow((a[e]-c)/b,4);d[0]/=a.length;d[1]/=a.length;return d}function xtract_skewness(a,c,b){return xtract_skewness_kurtosis(a,c,b)[0]}function xtract_kurtosis(a,c,b){return xtract_skewness_kurtosis(a,c,b)[1]}
function xtract_spectral_centroid(a){if(!xtract_assert_array(a))return 0;var c=a.length>>1,b=a.subarray(0,c);a=a.subarray(c);var d=xtract_array_sum(b);if(0===d)return 0;for(var e=0;c--;)e+=b[c]/d*a[c];return e}function xtract_spectral_mean(a){if(!xtract_assert_array(a))return 0;var c=a.length>>1;a=a.subarray(0,c);return xtract_array_sum(a)/c}
function xtract_spectral_variance(a,c){if(!xtract_assert_array(a))return 0;"number"!==typeof c&&(c=xtract_spectral_centroid(a));var b=0,d=a.length,e=d>>1,f=a.subarray(0,e);d=a.subarray(e,d);for(var g=xtract_array_sum(f);e--;)b+=f[e]/g*Math.pow(d[e]-c,2);return b}function xtract_spectral_spread(a,c){return xtract_spectral_variance(a,c)}function xtract_spectral_standard_deviation(a,c){if(!xtract_assert_array(a))return 0;"number"!==typeof c&&(c=xtract_spectral_variance(a));return Math.sqrt(c)}
function xtract_spectral_skewness(a,c,b){if(!xtract_assert_array(a))return 0;"number"!==typeof spectral_mean&&(c=xtract_spectral_centroid(a));"number"!==typeof b&&(b=xtract_spectral_standard_deviation(a,xtract_spectral_variance(a,c)));if(0===b)return 0;var d=0,e=a.length>>1,f=a.subarray(0,e);a=a.subarray(e);for(var g=xtract_array_sum(f),h=0;h<e;h++)d+=f[h]/g*Math.pow(a[h]-c,3);return d/=Math.pow(b,3)}
function xtract_spectral_kurtosis(a,c,b){if(!xtract_assert_array(a))return 0;"number"!==typeof c&&(c=xtract_spectral_centroid(a));"number"!==typeof b&&(b=xtract_spectral_standard_deviation(a,xtract_spectral_variance(a,c)));if(0===b)return Infinity;var d=0,e=a.length>>1,f=a.subarray(0,e);a=a.subarray(e);for(var g=xtract_array_sum(f),h=0;h<e;h++)d+=f[h]/g*Math.pow(a[h]-c,4);return d/Math.pow(b,4)}
function xtract_irregularity_k(a){if(!xtract_assert_array(a))return 0;var c=0,b=a.length>>1;a=a.subarray(0,b);for(var d=1;d<b-1;d++)c+=Math.abs(Math.log10(a[d])-Math.log10(a[d-1]+a[d]+a[d+1])/3);return c}function xtract_irregularity_j(a){if(!xtract_assert_array(a))return 0;var c=0,b=0,d=a.length>>1;a=a.subarray(0,d);for(var e=0;e<d-1;e++)c+=Math.pow(a[e]-a[e+1],2),b+=Math.pow(a[e],2);return c/b}
function xtract_tristimulus(a,c){var b=[0,0,0];if(!xtract_assert_array(a))return b;if("number"!==typeof c)throw"xtract_tristimulus requires f0 to be defined and a number";for(var d,e=0,f=[0,0,0,0,0],g,h=a.length>>1,k=a.subarray(0,h),l=a.subarray(h),m=0;m<h;m++)g=k[m],0!==g&&(e+=g,d=Math.floor(l[m]/c+.5),f[d-1]+=g);0!==e&&(b[0]=f[0]/e,b[1]=(f[1]+f[2]+f[3])/e,b[2]=f[4]/e);return b}function xtract_tristimulus_1(a,c){return xtract_tristimulus(a,c)[0]}
function xtract_tristimulus_2(a,c){return xtract_tristimulus(a,c)[1]}function xtract_tristimulus_3(a,c){return xtract_tristimulus(a,c)[2]}function xtract_smoothness(a){if(!xtract_assert_array(a))return 0;var c=0,b=a.length>>1;var d=Math.max(1E-5,a[0]);var e=Math.max(1E-5,a[1]);for(var f=1;f<b-1;f++){var g=Math.max(1E-5,a[f+1]);c+=Math.abs(20*Math.log(e)-(20*Math.log(d)+20*Math.log(e)+20*Math.log(g))/3);d=e;e=g}return c}
function xtract_zcr(a){if(!xtract_assert_array(a))return 0;for(var c=0,b=1;b<a.length;b++)0>a[b]*a[b-1]&&c++;return c/a.length}function xtract_rolloff(a,c,b){if(!xtract_assert_array(a))return 0;if("number"!==typeof c||"number"!==typeof b)return console.log("xtract_rolloff requires sampleRate and threshold to be defined"),null;var d=a.subarray(0,a.length>>1),e=0;var f=xtract_array_sum(d);f*=b/100;for(b=0;e<f;)e+=d[b],b++;return c/a.length*b}
function xtract_loudness(a){if(!xtract_assert_array(a))return 0;var c=0;if(a.reduce)c=a.reduce(function(a,c){return a+Math.pow(c,.23)},0);else for(var b=0;b<a.length;b++)c+=Math.pow(a[b],.23);return c}function xtract_flatness(a){if(!xtract_assert_array(a))return 0;for(var c=0,b=1,d=0,e=a.length>>1,f=a.subarray(0,e),g=0;g<e;g++)a=Math.max(1E-32,f[g]),b*=a,d+=a,c++;if(0===c)return 0;b=Math.pow(b,1/c);return b/(d/c)}
function xtract_flatness_db(a,c){if(!xtract_assert_array(a))return 0;"number"!==typeof c&&(c=xtract_flatness(a));return 10*Math.log10(c)}function xtract_tonality(a,c){if(!xtract_assert_array(a))return 0;"number"!==typeof c&&(c=xtract_flatness_db(a));return Math.min(c/-60,1)}function xtract_crest(a,c,b){if(!xtract_assert_array(a))return 0;"number"!==typeof c&&(c=xtract_array_max(a));"number"!==typeof b&&(b=xtract_mean(a));return c/b}
function xtract_noisiness(a,c){return"number"!==typeof a&&"number"!==typeof c?0:(c-a)/c}function xtract_rms_amplitude(a){if(!xtract_assert_array(a))return 0;var c=0;if(a.reduce)c=a.reduce(function(a,c){return a+c*c},0);else for(var b=0;b<a.length;b++)c+=a[b]*a[b];return Math.sqrt(c/a.length)}
function xtract_spectral_inharmonicity(a,c){if(!xtract_assert_array(a))return 0;if("number"!==typeof c)return console.error("spectral_inharmonicity requires f0 to be defined."),null;for(var b,d=0,e=0,f=a.length>>1,g=a.subarray(0,k),h=a.subarray(k),k=0;k<f;k++)if(0!==g[k]){b=Math.floor(h[k]/c+.5);var l=Math.pow(g[k],2);d+=Math.abs(h[k]-b*c)*l;e+=l}return 2*d/(c*e)}function xtract_power(a){return null}
function xtract_odd_even_ratio(a,c){if(!xtract_assert_array(a))return 0;if("number"!==typeof c)throw"spectral_inharmonicity requires f0 to be defined.";for(var b,d=0,e=0,f,g=a.length>>1,h=a.subarray(0,l),k=a.subarray(l),l=0;l<g;l++)f=h[l],0!==f&&(b=Math.floor(k[l]/c+.5),0!==b%2?d+=f:e+=f);return 0===d||0===e?0:d/e}function xtract_sharpness(a){if(!xtract_assert_array(a))return 0;for(var c=a.length,b,d,e=0,f=0;f<c;f++)b=Math.pow(a[f],.23),d=15>f?1:.066*Math.exp(.171*f),e+=f*d*b;return.11*e/c}
function xtract_spectral_slope(a){if(!xtract_assert_array(a))return 0;var c=0,b=0,d=a.length>>1,e=a.subarray(0,d),f=a.subarray(d);a=xtract_array_sum(f);var g=xtract_array_sum(e);for(var h=0;h<d;h++)c+=f[h]*e[h],b+=f[h]*f[h];return 1/g*(d*c-a*g)/(d*b-a*a)}function xtract_lowhigh(a,c){for(var b={min:null,max:null},d=0;d<a.length;d++)a[d]>c&&(b.min=Math.min(b.min,a[d])),a[d]<c&&(b.max=Math.max(b.max,a[d]));return b}
function xtract_lowest_value(a,c){if(!xtract_assert_array(a))return 0;"number"!==typeof c&&(c=-Infinity);return xtract_lowhigh(a,c).min}function xtract_highest_value(a,c){if(!xtract_assert_array(a))return 0;"number"!==typeof c&&(c=Infinity);return xtract_lowhigh(a,c).max}function xtract_sum(a){return xtract_assert_array(a)?xtract_array_sum(a):0}
function xtract_nonzero_count(a){if(!xtract_assert_array(a))return 0;var c=0;if(a.reduce)return a.reduce(function(a,c){0!==c&&a++;return a});for(var b=0;b<a.length;b++)0!==a[b]&&c++;return c}
function xtract_hps(a){if(!xtract_assert_array(a))return 0;var c=0,b=0,d=0,e=0;e=a.length>>1;var f=a.subarray(0,e);a=a.subarray(e);c=Math.ceil(e/3);var g;if(1>=c)throw"Input Data is too short for HPS";c=function(a,c){var b=0,d=0,e=new Float64Array(a);e.forEach(function(a,b,d){d[b]=c[b]*c[2*b]*c[3*b]});e.forEach(function(a,c){a>d&&(d=a,b=c)});return b}(c,f);for(g=0;g<e;g++)f[g]>d&&g!==c&&(d=f[g],b=g);e=f[b]/f[c];b>.4*c&&b<.6*c&&.1<e&&(c=b);return a[c]}
function xtract_f0(a,c){function b(a,c,b){var d=0,e;for(e=1;e<c;e++)d+=Math.abs(a[e]-a[e+b]);return d}if(!xtract_assert_array(a))return 0;"number"!==typeof c&&(c=44100);var d=xtract_array_copy(a),e=d.length/2,f=.8,g=.3,h=0;h=xtract_array_max(d);f*=h;g*=h;d=xtract_array_bound(d,-f,f);d.forEach(function(a,c,b){b[c]=Math.max(0,a-g)});f=b(d,e,1);for(h=2;h<e;h++){var k=b(d,e,h);if(k<f)return c/(h+k/f)}return-0}function xtract_failsafe_f0(a,c){return xtract_f0(a,c)}
function xtract_wavelet_f0(a,c,b){function d(a){return 0===a||2===a?1:a&1?0:d(a>>1)}function e(a){return 0===a?0:1===a?1:2===a?2:e(a>>1)+1}function f(a){return 0<=a?a:-a}function g(a){var c=1,b;for(b=0;b<a;b++)c<<=1;return c}function h(){r=Math.floor(44100/(3E3*g(z)));if(2>w)t=!1;else{var a=-1E3,c=0,b=0,d=-1E6,e=-1E6,h=0,H=0;for(m=2;m<w;m++){q=u[m]-F;n=u[m-1]-F;0>=n&&0<q&&(h=1);0<=n&&0>q&&(H=1);var x=q-n;-1E3<a&&(H&&0>a&&0<=x&&Math.abs(q)>=J&&m>d+r&&(d=v[c++]=m,H=0),h&&0<a&&0>=x&&Math.abs(q)>=J&&
m>e+r&&(e=C[b++]=m,h=0));a=x}if(0===c&&0===b)t=!1;else{var D=new Int32Array(k);for(m=0;m<c;m++)for(p=1;3>p;p++)m+p<c&&(x=f(v[m]-v[m+p]),D[x]+=1);for(m=0;m<b;m++)for(p=1;3>p;p++)m+p<b&&(x=f(C[m]-C[m+p]),D[x]+=1);var B=-1,I=-1;(function(){for(m=0;m<w;m++){var a=0;for(p=-r;p<=r;p++)0<=m+p&&m+p<w&&(a+=D[m+p]);a===I?m===2*B&&(B=m):a>I&&(I=a,B=m)}})();var G=0,L=0;(function(){for(p=-r;p<=r;p++)if(0<=B+p&&B+p<k){var a=D[B+p];0<a&&(L+=a,G+=(B+p)*a)}})();G/=L;if(-1<A&&Math.abs(2*G-A)<=2*r)l=44100/(g(z-1)*A),
t=!1;else if(A=G,z+=1,6<=z)t=!1;else if(2>w)t=!1;else{for(m=0;m<w/2;m++)u[m]=(u[2*m]+u[2*m+1])/2;w/=2}}}}if(!xtract_assert_array(a))return 0;if(void 0===b)throw"xtract_wavelet_f0 requires pitchtracker to be defined";if(0!==xtract_array_sum(a)){var k=a.length,l=0,m,p,q,n;k=function(a){if(!d(a)){if(!d(a))if(1===a)a=2;else{var c=e(a),b=1;for(a=0;a<c;a++)b<<=1;a=b}a/=2}return a}(k);var u=new Float64Array(k);for(m=0;m<k;m++)u[m]=a[m];for(var w=k,v=new Int32Array(k),C=new Int32Array(k),F=xtract_mean(u.subarray(k)),
J=.75*function(a,c){var b,d=0,e=0;for(b=0;b<c;b++){var f=a[b];f>e&&(e=f);f<d&&(d=f)}e-=F;d-=F;return e>-d?e:-d}(u,k),z=0,A=-1,r,t=!0;t;)h();return function(a,c){if(0===c)return-1;var b=-1;-1!==c?-1===a._prevPitch?(b=c,a._prevPitch=c,a._pitchConfidence=1):.2>Math.abs(a._prevPitch-c)/c?(b=a._prevPitch=c,a._pitchConfidence=Math.min(5,a._pitchConfidence+1)):3<=a._pitchConfidence&&.2>Math.abs(a._pitchConfidence-2*c)/(2*c)?(b=2*c,a._prevPitch=b):3<=a._pitchConfidence&&.2>Math.abs(a._pitchConfidence-.5*
c)/(.5*c)?(b=.5*c,a._prevPitch=b):1<=a._pitchConfidence?(b=a._prevPitch,a._pitchConfidence=Math.max(0,a._pitchConfidence-1)):(b=c,a._prevPitch=c,a._pitchConfidence=1):-1!==a._prevPitch&&(1<=a._pitchConfidence?(b=a._prevPitch,a._pitchConfidence=Math.max(0,a._pitchConfidence-1)):(b=a._prevPitch=-1,a._pitchConfidence=0));c=1<=a._pitchConfidence?b:-1;-1===c&&(c=0);return c}(b,l)}}function xtract_midicent(a){if("number"!==typeof a)return-1;a=69+17.31234*Math.log(a/440);return a=Math.round(.5+100*a)}
function xtract_spectral_fundamental(a,c){if(!xtract_assert_array(a))return 0;var b=a.length>>1,d=a.subarray(0,b);a.subarray(b);var e=2*b,f=new Float64Array(e),g;for(g=0;g<b;g++)f[g]=Math.pow(d[g],2),f[e-1-g]=f[g];b=new Float64Array(e);inverseTransform(f,b);b=5;d=[];e=f.length;void 0===b&&(b=5);for(g=b;g<e-b-1;g++){var h=1,k;for(k=-b;k<b-1;k++)if(f[g+k]>f[g]){h=0;break}1===h&&d.push(g)}f=d;if(0===f.length)return 0;f=f[0];return 1/(f/c)}
function xtract_energy(a,c,b){if(!xtract_assert_array(a))return 0;if("number"!==typeof c)console.error("xtract_energy requires sample_rate to be defined");else{"number"!==typeof b&&(b=100);0>=b&&(b=100);c=Math.floor(b/1E3*c);b=Math.ceil(a.length/c);for(var d=new Float64Array(b),e=0;e<b;e++){var f=a.subarray(e*c,e*c+c);f=xtract_rms_amplitude(f);d[e]=f}return d}}
function xtract_spectrum(a,c,b,d){if("number"!==typeof c)throw"Sample Rate must be defined";if(!xtract_assert_array(a))return 0;d=!0===d;var e=a.length,f=0;!0===b?b=new Float64Array(e+2):(f=1,b=new Float64Array(e));var g=b.subarray(0,b.length/2);var h=b.subarray(b.length/2);var k=new Float64Array(e),l=new Float64Array(e);a.forEach(function(a,c){k[c]=a});transform(k,l);for(var m=f;m<=b.length/2;m++)g[m-f]=Math.sqrt(k[m]*k[m]+l[m]*l[m])/a.length,h[m-f]=2*m/e*(c/2);d&&(g=xtract_array_normalise(g));return b}
function xtract_complex_spectrum(a,c,b){if(!xtract_assert_array(a))return 0;if("number"!==typeof c)return console.error("Sample Rate must be defined"),null;void 0===b&&(b=!1);var d=a.length,e=0;b?b=new Float64Array(3*(d/2+1)):(e=1,b=new Float64Array(d/2*3));var f=b.subarray(0,b.length/3*2);var g=b.subarray(b.length/3*2);for(var h=new Float64Array(d),k=new Float64Array(d),l=0;l<d;l++)h[l]=a[l];transform(h,k);for(a=e;a<=h.length/2;a++)f[2*(a-e)]=h[a],f[2*(a-e)+1]=k[a],g[a-e]=2*a/d*(c/2);return b}
function xtract_mfcc(a,c){if(!xtract_assert_array(a))return 0;var b=a.length>>1;if("object"!==typeof c)throw"Invalid MFCC, must be MFCC object built using xtract_init_mfcc";if(0===c.n_filters)throw"Invalid MFCC, object must be built using xtract_init_mfcc";if(c.filters[0].length!==b)throw"Lengths do not match";b=new Float64Array(c.n_filters);b.forEach(function(b,e,f){f[e]=0;b=c.filters[e];for(var d=0;d<b.length;d++)f[e]+=a[d]*b[d];f[e]=Math.log(Math.max(f[e],2E-42))});return xtract_dct(b)}
function xtract_dct(a){if(!xtract_assert_array(a))return 0;var c=a.length,b=new Float64Array(c);if(a.reduce)b.forEach(function(b,d,e){var f=d/c;e[d]=a.reduce(function(a,c,b){return a+c*Math.cos(Math.PI*f*(b+.5))})});else for(var d=0;d<c;d++)for(var e=d/c,f=0;f<c;f++)b[d]+=a[f]*Math.cos(Math.PI*e*(f+.5));return b}
function xtract_dct_2(a,c){if(!xtract_assert_array(a))return 0;var b=a.length;void 0===c&&(c=xtract_init_dct(b));var d=new Float64Array(b);d[0]=xtract_array_sum(a);if(d.forEach&&a.reduce)d.forEach(function(b,d,e){e[d]=a.reduce(function(a,b,e){return a+b*c.wt[d][e]})});else for(var e=1;e<b;e++)for(var f=0;f<b;f++)d[e]+=a[f]*c.wt[e][f];return d}function xtract_autocorrelation(a){return xtract_assert_array(a)?jsXtract.functions.autocorrelation(a):0}
function xtract_amdf(a){if(!xtract_assert_array(a))return 0;for(var c=a.length,b=new Float64Array(c);c--;){for(var d=0,e=0;e<a.length-c;e++)d+=Math.abs(a[e]-a[e+c]);b[c]=d/a.length}return b}function xtract_asdf(a){if(!xtract_assert_array(a))return 0;for(var c=a.length,b=new Float64Array(c);c--;){for(var d=0,e=0;e<a.length-c;e++)d+=Math.pow(a[e]-a[e+c],2);b[c]=d/a.length}return b}
function xtract_bark_coefficients(a,c){if(!xtract_assert_array(a))return 0;if(void 0===c)throw"xtract_bark_coefficients requires compute limits from xtract_init_bark";for(var b=c.length,d=new Float64Array(b),e=0;e<b-1;e++){d[e]=0;for(var f=c[e];f<c[e+1];f++)d[e]+=a[f]}return d}
function xtract_peak_spectrum(a,c,b){if(!xtract_assert_array(a))return 0;var d=a.length,e=d>>1;if("number"!==typeof c)throw"xtract_peak_spectrum requires second argument to be sample_rate/N";if(0>b||100<b)b=0;var f=new Float64Array(d),g=a.subarray(0,e);a.subarray(e);a=f.subarray(0,e);e=f.subarray(e);var h=xtract_array_max(g);b*=.01*h;for(var k=1;k<d-1;k++)if(g[k]>=b)if(g[k]>g[k-1]&&g[k]>g[k+1]){h=g[k-1];var l=g[k];var m=g[k+1];var p=.5*(h-m)/(g[k-1]-2*(l+g[k+1]));e[k]=c*(k+1+p);a[k]=l-.25*(h-m)*p}else a[k]=
0,e[k]=0;else a[k]=0,e[k]=0;return f}function xtract_harmonic_spectrum(a,c,b){if(!xtract_assert_array(a))return 0;var d=a.length,e=d>>1;d=new Float64Array(d);var f=a.subarray(0,e);a=a.subarray(e);var g=d.subarray(0,e),h=d.subarray(e);if(void 0===c||void 0===b)throw"harmonic_spectrum requires f0 and threshold to be numbers and defined";for(1<b&&(b/=100);e--;)if(0!==a[e]){var k=a[e]/c;Math.abs(Math.round(k)-k)>b?(g[e]=0,h[e]=0):(g[e]=f[e],h[e]=a[e])}else d[e]=0,h[e]=0;return d}
function xtract_lpc(a){if(!xtract_assert_array(a))return 0;var c,b,d=a[0],e=a.length-1,f=new Float64Array(e),g=new Float64Array(e);if(0===d)return f;for(c=0;c<e;c++){var h=-a[c+1];for(b=0;b<c;b++)h-=f[b]*a[c-b];h/=d;g[c]=h;f[c]=h;for(b=0;b<c>>1;b++){var k=f[b];f[b]+=h*f[c-1-b];f[c-1-b]+=h*k}c%2&&(f[b]+=f[b]*h);d*=1-h*h}return f}
function xtract_lpcc(a,c){if(!xtract_assert_array(a))return 0;var b=a.length,d,e=b-1;"number"!==typeof c&&(c=b-1);var f=c;var g=new Float64Array(f);for(b=1;b<c&&b<f;b++){var h=0;for(d=1;d<b;d++)h+=d*g[d-1]*a[b-d];g[b-1]=a[b]+h/b}for(b=e+1;b<=f;b++){h=0;for(d=b-(e-1);d<b;d++)h+=d*g[d-1]*a[b-d];g[b-1]=h/b}return g}
function xtract_pcp(a,c,b){if(!xtract_assert_array(a))return 0;var d=a.length>>1;if("object"!==typeof c){if("number"!==typeof b||0>=b)throw"Cannot dynamically compute M if fs is undefined / not a valid sample rate";xtract_init_pcp(d,b)}a=a.subarray(1,d);c=new Float64Array(12);for(b=0;b<a.length;b++)c[b]+=Math.pow(Math.abs(a[b]),2);return c}
function xtract_yin(a){if(!xtract_assert_array(a))return 0;for(var c=a.length,b=new Float64Array(a.length),d=new a.constructor(a.length),e=0,f=1;f<c;f++){for(var g=0,h=1;h<c-f;h++)g+=Math.pow(a[h]-a[h+f],2);b[f]=g;e+=g;d[f]=b[f]/(1/f*e)}return d}
function xtract_onset(a,c){function b(a,c){return void 0===c&&2===a.length?Math.atan2(a[1],a[0]):Math.atan2(c,a)}function d(a,c){if(2!==a.length||2!==c.length)throw"Both arguments must be numeral arrays of length 2";var b=new a.constructor(2);b[0]=a[0]*c[0]-a[1]*c[1];b[1]=a[0]*c[1]+a[1]*c[0];return b}if(!xtract_assert_array(a))return 0;if(void 0===c)throw"All arguments for xtract_onset must be defined: xtract_onset(timeData, frameSize)";var e=xtract_get_data_frames(a,c,c,!1),f=e.length,g=c/2+1;e=
function(a,c){for(var b=a.length,d=[],e=new Float64Array(c),f=new Float64Array(c),k=c/2+1,g,h=0;h<b;h++){for(g=0;g<c;g++)e[g]=a[h][g],f[g]=0;transform(e,f);d[h]=xtract_array_interlace([e.subarray(0,k),f.subarray(0,k)])}return d}(e,c);for(var h=new a.constructor(f),k,l=0;l<g;l++){var m=b(e[0].subarray(2*l,2*l+2)),p=b(e[0].subarray(2*l,2*l+2));for(k=1;k<f;k++){p=(m+p+Math.PI)%(-2*Math.PI)+Math.PI;p=[Math.cos(p),Math.sin(p)];var q=d(e[k].subarray(2*l,2*l+2),p);q[0]=e[k][2*l]-q[0];q[1]=e[k][2*l+1]-q[1];
p=k;var n=h[p];q=2===q.length?Math.sqrt(Math.pow(q[0],2)+Math.pow(q[1],2)):Math.sqrt(Math.pow(q,2)+Math.pow(void 0,2));h[p]=n+q;n=b(e[k].subarray(2*l,2*l+2));p=n-m;m=n}}for(k=0;k<f;k++)h[k]/=c;return h}
function xtract_resample(a,c,b,d){function e(a,c){var b=Math.floor(c*a);var d=new Float64Array(a);var e=new Float64Array(a);var f;for(f=0;f<b;f++)d[f]=1;for(f=a-b+1;f<a;f++)d[f]=1;inverseTransform(d,e);for(f=0;f<a;f++)b=(f+(a>>1))%a,e[f]=d[b]/a,b=Math.PI*f/a,e[f]*=.35875-.48829*Math.cos(2*b)+.14128*Math.cos(4*b)-.01168*Math.cos(6*b);return e}function f(a,c){var b=a.length,d=[0,a[0],a[1]],e=new Float64Array(c),f=1/(c/b),k=0,g=0,h;for(h=0;h<c;h++)e[h]=g===k?a[k]:((g-k-1)*(g-k)*d[0]-2*(g-k-1)*(g-k+1)*
d[1]+(g-k)*(g-k+1)*d[2])/2,g+=f,g>=k+1&&(k=Math.floor(g),d[0]=a[k-1],d[1]=a[k],d[2]=k+1<b?a[k+1]:0);return e}function g(a,c){for(var b,d,e=new Float64Array(a.length),f=c.length,k=2*f,g=new Float64Array(2*c.length),h=0;h<c.length;h++)g[h]=c[h];h=new Float64Array(g.length);transform(g,h);var l=xtract_get_data_frames(a,f,f,!1),m=xtract_get_data_frames(e,f,f,!1),z=new Float64Array(f),A=new Float64Array(f),r=new Float64Array(k);for(b=0;b<k;b++)d=Math.PI*b/k,r[b]=.35875-.48829*Math.cos(2*d)+.14128*Math.cos(4*
d)-.01168*Math.cos(6*d);var t=new Float64Array(k),E=new Float64Array(k),y=new Float64Array(k),K=new Float64Array(k);for(d=0;d<l.length;d++){for(b=0;b<f;b++)t[b]=z[b]*r[b],t[b+f]=l[d][b]*r[b+f],z[b]=l[d][b],E[b]=0,E[b+f]=0;transform(t,E);for(b=0;b<k;b++)y[b]=t[b]*g[b]-E[b]*h[b],K[b]=E[b]*g[b]+t[b]*h[b];transform(K,y);for(b=0;b<f;b++){var M=y[b+f]/f;y[b+f]=y[b]/f;y[b]=M}for(b=0;b<f;b++)m[d][b]=y[b]+A[b],A[b]=y[b+f]}return e}if(!xtract_assert_array(a))return 0;var h=a.length;if("number"!==typeof d||
0>=d)d=512;if(c===b)return a;var k=c/b;h=Math.floor(h*k);c>b?(h=f(a,h),d=e(d,1/k),g(a,d)):(d=e(d,k/2),a=g(a,d),h=f(a,h));return h}function xtract_init_dft(a){for(var c={N:a/2+1,real:[],imag:[]},b=-2*Math.PI/a,d=0;d<c.N;d++){var e=b*d;c.real[d]=new Float64Array(a);c.imag[d]=new Float64Array(a);for(var f=0;f<a;f++){var g=e*f;c.real[d][f]=Math.cos(g);c.imag[d][f]=Math.sin(g)}}return c}
function xtract_init_dct(a){for(var c={N:a,wt:[]},b=0;b<a;b++){c.wt[b]=new Float64Array(a);for(var d=0;d<a;d++)c.wt[b][d]=Math.cos(Math.PI*b*(d+.5)/a)}return c}
function xtract_init_mfcc(a,c,b,d,e,f){var g={n_filters:f,filters:[]};if(1>=f)return null;var h=0,k=a/2,l=1127*Math.log(1+d/700),m=(1127*Math.log(1+e/700)-l)/f,p=new Float64Array(f+2),q=new Float64Array(f+2);e=new Float64Array(f+2);var n=new Float64Array(f);p[0]=l;q[0]=d;e[0]=Math.floor(q[0]/c*k);for(d=1;d<f+2;++d)p[d]=p[d-1]+m,q[d]=700*(Math.exp(p[d]/1127)-1),e[d]=Math.floor(q[d]/c*k);for(d=0;d<f;d++)"XTRACT_EQUAL_GAIN"===b?k=c=1:(c=2/(q[d+2]-q[d]),k=1/(2/(q[2]-q[0]))),n[d]=c*k;for(b=0;b<f;b++){q=
0===b?n[b]/e[b]:n[b]/(e[b]-e[b-1]);c=0;for(g.filters[b]=new Float64Array(a);h<=e[b];h++)g.filters[b][h]=c,c+=q;q=n[b]/(e[b+1]-e[b]);c=0;h=e[b+1];for(h=Math.floor(h);h>e[b];h--)g.filters[b][h]=c,c+=q}return g}function xtract_init_wavelet(){return{_prevPitch:-1,_pitchConfidence:-1}}
function xtract_init_pcp(a,c,b){if("number"!==typeof c||"number"!==typeof a)throw"The Sample Rate and sample count have to be defined: xtract_init_pcp(N, fs, f_ref)";if(0>=a||a!==Math.floor(a))throw"The sample count, N, must be a positive integer: xtract_init_pcp(N, fs, f_ref)";if(0>=c)throw"The Sample Rate must be a positive number: xtract_init_pcp(N, fs, f_ref)";if("number"!==typeof b||0>=b||b>=c/2)b=48.9994294977;var d=new Float64Array(a-1);c/=2;for(var e=1;e<a;e++)d[e-1]=Math.round(12*Math.log2(2*
e/a*c/a*b))%12;return d}function xtract_init_bark(a,c,b){if("number"!==typeof b||0>b||26<b)b=26;for(var d=[0,100,200,300,400,510,630,770,920,1080,1270,1480,1720,2E3,2320,2700,3150,3700,4400,5300,6400,7700,9500,12E3,15500,20500,27E3],e=new Int32Array(b);b--;)e[b]=d[b]/c*a;return e}
function xtract_init_chroma(a,c,b,d,e,f){if("number"!==typeof b||1>=b)b=12;if("number"!==typeof d||27.5>=d)d=440;"number"!==typeof e&&(e=1E3);"number"!==typeof f&&(f=1);e=Math.log(e/27.5)/Math.LN2;var g={wts:[],nfft:a,nbins:b},h=new Float64Array(a),k=new Float64Array(a),l;for(l=1;l<a;l++)h[l]=Math.log(l/a*c/(d/16))/Math.LN2*b;h[0]=h[1]-1.5*b;for(l=0;l<a-1;l++)c=h[l+1]-h[l],k[l]=1<=c?c:1;k[a-1]=1;var m=Math.round(b/2);c=[];for(l=0;l<b;l++)for(c[l]=[],d=0;d<a;d++)c[l][d]=Math.exp(-.5*Math.pow(2*((h[d]-
l+m+10*b)%b-m)/k[d],2));l=xtract_array_sum;if(void 0===c)k=[];else{k=c.length;d=c[0].length;m=[];var p,q;for(p=0;p<d;p++)m[p]=new Float64Array(k);for(p=0;p<k;p++)for(q=0;q<d;q++)m[q][p]=c[p][q];k=m}k=k.map(l);for(l=0;l<b;l++)for(d=0;d<a;d++)c[l][d]*=1/k[d];if(0<f)for(l=0;l<b;l++)for(d=0;d<a;d++)c[l][d]*=Math.exp(-.5*Math.pow((h[d]/b-e)/f,2));g.wts=c;return g}
function xtract_apply_window(a,c){if(!xtract_assert_array(a)||!xtract_assert_array(c))throw"Both X and W must be defined";if(a.length!==c.length)throw"Both X and W must be the same lengths";var b=a.length,d=new Float64Array(b),e;for(e=0;e<b;e++)d[e]=a[e]*c[e];return d}
function xtract_create_window(a,c){function b(a){var b=new Float64Array(a),c,d=(a-1)/2;for(c=0;c<a;c++)b[c]=1-Math.pow((c-d)/d,2);return b}function d(a){var b=new Float64Array(a),c,d=Math.PI*c/(a-1);for(c=0;c<a;c++)b[c]=Math.sin(d);return b}function e(a){var c=new Float64Array(a),b;for(b=0;b<a;b++)c[b]=.5-(1-Math.cos(2*Math.PI*b/(a-1)));return c}function f(a){var b=new Float64Array(a),c=25/46,d=21/46,e;for(e=0;e<a;e++)b[e]=c-d*Math.cos(2*Math.PI*e/(a-1));return b}(function(a,b){if(!xtract_assert_positive_integer(a))throw"N must be a defined, positive integer";
if("string"!==typeof b||0===b.length)throw"Type must be defined";})(a,c);c=c.toLowerCase();switch(c){case "hamming":return f(a);case "welch":return b(a);case "sine":return d(a);case "hann":return e(a);default:throw'Window function"'+c+'" not defined';}}
function xtract_chroma(a,c){if(!xtract_assert_array(a))return 0;if(void 0===c.wts)throw"xtract_chroma requires chroma filters from xtract_init_chroma";if(c.nfft!==a.length/2)throw"the FFT lengths of the spectrum ("+a.length/2+") and chroma filterbank ("+c.nfft+") do not match";for(var b=new Float64Array(c.nbins),d=0;d<c.nbins;d++){for(var e=0,f=0;f<c.nfft;f++)e+=c.wts[d][f]*a[f];b[d]=e}return b}
function transform(a,c){if(a.length!==c.length)throw"Mismatched lengths";var b=a.length;0!==b&&(0===(b&b-1)?transformRadix2(a,c):transformBluestein(a,c))}function inverseTransform(a,c){transform(c,a)}
function transformRadix2(a,c){function b(a,b,c,d,e){var f,k,g=a.length,h=e/2,l=g/e;for(f=0;f<g;f+=e){var m=f;for(k=0;m<f+h;m++,k+=l){var q=a[m+h]*d[k]+b[m+h]*c[k],p=-a[m+h]*c[k]+b[m+h]*d[k];a[m+h]=a[m]-q;b[m+h]=b[m]-p;a[m]+=q;b[m]+=p}}}if(a.length!==c.length)throw"Mismatched lengths";var d=a.length;if(1!==d){var e=function(a){var b;for(b=0;32>b;b++)if(1<<b===a)return b;return-1}(d);if(-1===e)throw"Length is not a power of 2";var f=new Float64Array(d/2),g=new Float64Array(d/2);(function(a,b){var c=
a.length,d;for(d=0;d<c;d++)a[d]=Math.cos(Math.PI*d/c),b[d]=Math.sin(Math.PI*d/c)})(f,g);(function(a,b){var c,f;for(c=0;c<d;c++){var k=c;for(var g=f=0;g<e;g++)f=f<<1|k&1,k>>>=1;k=f;k>c&&(f=a[c],a[c]=a[k],a[k]=f,f=b[c],b[c]=b[k],b[k]=f)}})(a,c);for(var h=2;h<=d;h*=2)b(a,c,g,f,h)}}
function transformBluestein(a,c){if(a.length!==c.length)throw"Mismatched lengths";for(var b,d,e=a.length,f=1;f<2*e+1;)f*=2;var g=new Float64Array(e),h=new Float64Array(e);for(b=0;b<e;b++)d=b*b%(2*e),g[b]=Math.cos(Math.PI*d/e),h[b]=Math.sin(Math.PI*d/e);d=new Float64Array(f);var k=new Float64Array(f);for(b=0;b<e;b++)d[b]=a[b]*g[b]+c[b]*h[b],k[b]=-a[b]*h[b]+c[b]*g[b];var l=new Float64Array(f),m=new Float64Array(f);l[0]=g[0];m[0]=h[0];for(b=1;b<e;b++)l[b]=l[f-b]=g[b],m[b]=m[f-b]=h[b];var p=new Float64Array(f);
f=new Float64Array(f);convolveComplex(d,k,l,m,p,f);for(b=0;b<e;b++)a[b]=p[b]*g[b]+f[b]*h[b],c[b]=-p[b]*h[b]+f[b]*g[b]}function convolveReal(a,c,b){if(a.length!==c.length||a.length!==b.length)throw"Mismatched lengths";for(var d=Array(a.length),e=0;e<d.length;e++)d[e]=0;convolveComplex(a,d,c,d.slice(),b,d.slice())}
function convolveComplex(a,c,b,d,e,f){if(a.length!==c.length||a.length!==b.length||b.length!==d.length||a.length!==e.length||e.length!==f.length)throw"Mismatched lengths";var g,h=a.length;a=a.slice();c=c.slice();b=b.slice();d=d.slice();transform(a,c);transform(b,d);for(g=0;g<h;g++){var k=a[g]*b[g]-c[g]*d[g];c[g]=c[g]*b[g]+a[g]*d[g];a[g]=k}inverseTransform(a,c);for(g=0;g<h;g++)e[g]=a[g]/h,f[g]=c[g]/h}
var DataProto=function(a,c){function b(a,c){var d,e={};for(d in a)if(c[d])if("number"===typeof a[d])e[d]=a[d]-c[d];else{var f=d;var g=a;var p=c,q=d;if(g.result&&p.result)g=b(g[q].result,p[q].result);else if(g.length&&p.length){g=g[q];q=p[q];p=g.length===q.length?new Float64Array(g.length):[];for(var n=0;n<g.length&&n<q.length;)p[n]=g[n]-q[n],n++;g=p}else g=void 0;e[f]=g}return e}var d={},e=new Float64Array(a);this.clearResult=function(){d={}};Object.defineProperties(this,{result:{get:function(){return d},
set:function(){}},data:{value:e},getData:{value:function(){return e}}});this.zeroDataRange=function(a,b){if(e.fill)e.fill(0,a,b);else for(var c=a;c<b;c++)e[c]=0;this.clearResult()};this.copyDataFrom=function(a,b,c){if("object"!==typeof a||void 0===a.length)throw"copyDataFrom requires src to be an Array or TypedArray";void 0===c&&(c=0);void 0===b&&(b=Math.min(a.length,e.length));b=Math.min(b+c,e.length);for(var d=0;d<b;d++)e[d+c]=a[d];this.clearResult()};this.duplicate=function(){this.prototype.constructor(a,
c).copyDataFrom(e)};this.toJSON=function(){function a(a){var b=a[a.length-1];"{"!==b&&","!==b&&(a+=", ");return a}function b(a,b){return"number"===typeof a&&isFinite(a)?'"'+b+'": '+a:"object"===typeof a?a.toJSON?'"'+b+'": '+a.toJSON(a):a.length?'"'+b+'": '+xtract_array_to_JSON(a):'"'+b+'": '+this.toJSON(a):'"'+b+'": "'+a.toString()+'"'}var c="{",e;for(e in d)d.hasOwnProperty(e)&&(c=a(c),c+=b(d[e],e));return c+"}"};this.computeDelta=function(a){this.result.delta=b(this.result,a.result);return this.result.delta};
this.computeDeltaDelta=function(a){if(!a.result.delta||!this.result.delta)throw"Cannot compute delta-delta without both objects having deltas";this.result.delta.delta=b(this.result.delta,a.result.delta);return this.result.delta.delta}};DataProto.prototype.createDctCoefficients=function(a){return jsXtract.createDctCoefficients(Number(a))};
DataProto.prototype.createMfccCoefficients=function(a,c,b,d,e,f){a=Number(a);c=Number(c);d=Number(d);e=Number(e);f=Number(f);return jsXtract.createMfccCoefficients(a,c,b,d,e,f)};DataProto.prototype.createBarkCoefficients=function(a,c,b){a=Number(a);c=Number(c);b=Number(b);return jsXtract.createBarkCoefficients(a,c,b)};
DataProto.prototype.createChromaCoefficients=function(a,c,b,d,e,f){a=Number(a);c=Number(c);b=Number(b);d=Number(d);e=Number(e);f=Number(f);return jsXtract.createChromaCoefficients(a,c,b,d,e,f)};
var TimeData=function(a,c,b){0>=c&&(c=void 0,console.log("Invalid parameter for 'sampleRate' for TimeData"));if("object"===typeof a)if(a.constructor===TimeData){var d=d.getData();var e=d.length;DataProto.call(this,e);a=e;this.copyDataFrom(d,a,0)}else if(a.constructor===Float32Array||a.constructor===Float64Array)d=a,a=e=d.length,DataProto.call(this,e),this.copyDataFrom(d,a,0);else throw"TimeData: Invalid object passed as first argument.";else if("number"===typeof a){if(0>=a||a!==Math.floor(a))throw"TimeData: Invalid number passed as first argument.";
e=a;DataProto.call(this,a,c)}else throw"TimeData: Constructor has invalid operators!";var f=c;var g=void 0;var h=xtract_init_wavelet();this.zeroData=function(){this.zeroDataRange(0,a)};Object.defineProperties(this,{features:{values:this.constructor.prototype.features},sampleRate:{get:function(){return f},set:function(a){if(void 0===f)f=a;else throw"Cannot set one-time variable";}},length:{value:e,writable:!1,enumerable:!0},getFrames:{value:function(a,b){if("number"!==typeof a||0>=a||a!==Math.floor(a))throw"frameSize must be a defined, positive integer";
"number"!==typeof b&&(b=a);for(var c=Math.ceil(e/a),d=[],g=0;g<c;g++){var k=new TimeData(b,f);k.copyDataFrom(this.data.subarray(a*g,a*g+b));d.push(k)}return d}},minimum:{value:function(){void 0===this.result.minimum&&(this.result.minimum=xtract_array_min(this.data));return this.result.minimum}},maximum:{value:function(){void 0===this.result.maximum&&(this.result.maximum=xtract_array_max(this.data));return this.result.maximum}},sum:{value:function(){void 0===this.result.sum&&(this.result.sum=xtract_array_sum(this.data));
return this.result.sum}},mean:{value:function(){void 0===this.result.mean&&(this.result.mean=xtract_mean(this.data));return this.result.mean}},temporal_centroid:{value:function(a){void 0===this.result.temporal_centroid&&(this.energy(a),this.result.temporal_centroid=xtract_temporal_centroid(this.result.energy.data,f,a));return this.result.temporal_centroid}},variance:{value:function(){void 0===this.result.variance&&(this.result.variance=xtract_variance(this.data,this.mean()));return this.result.variance}},
standard_deviation:{value:function(){void 0===this.result.standard_deviation&&(this.result.standard_deviation=xtract_standard_deviation(this.data,this.variance()));return this.result.standard_deviation}},average_deviation:{value:function(){void 0===this.result.average_deviation&&(this.result.average_deviation=xtract_average_deviation(this.data,this.mean()));return this.result.average_deviation}},skewness:{value:function(){void 0===this.result.skewness&&(this.result.skewness=xtract_skewness(this.data,
this.mean(),this.standard_deviation()));return this.result.skewness}},kurtosis:{value:function(){void 0===this.result.kurtosis&&(this.result.kurtosis=xtract_kurtosis(this.data,this.mean(),this.standard_deviation()));return this.result.kurtosis}},zcr:{value:function(){void 0===this.result.zcr&&(this.result.zcr=xtract_zcr(this.data));return this.result.zcr}},crest_factor:{value:function(){void 0===this.result.crest_factor&&(this.result.crest_factor=xtract_crest(this.data,this.maximum(),this.mean()));
return this.result.crest_factor}},rms_amplitude:{value:function(){void 0===this.result.rms_amplitude&&(this.result.rms_amplitude=xtract_rms_amplitude(this.data));return this.result.rms_amplitude}},lowest_value:{value:function(a){void 0===this.result.lowest_value&&(this.result.lowest_value=xtract_lowest_value(this.data,a));return this.result.lowest_value}},highest_value:{value:function(a){void 0===this.result.highest_value&&(this.result.highest_value=xtract_highest_value(this.data,a));return this.result.highest_value}},
nonzero_count:{value:function(){void 0===this.result.nonzero_count&&(this.result.nonzero_count=xtract_nonzero_count(this.data));return this.result.nonzero_count}},f0:{value:function(){void 0===h&&(h=this.init_wavelet());void 0===this.result.f0&&(this.result.f0=xtract_wavelet_f0(this.data,f,h));return this.result.f0}},energy:{value:function(a){if(void 0===this.result.energy||this.result.energy.window_ms!==a)this.result.energy={data:xtract_energy(this.data,f,a),window_ms:a};return this.result.energy}},
spectrum:{value:function(){if(void 0===this.result.spectrum){var a=xtract_spectrum(this.data,f,!0,!1);this.result.spectrum=new SpectrumData(a.length/2,f);this.result.spectrum.copyDataFrom(a);return this.result.spectrum}}},dct:{value:function(){void 0===g&&(g=this.createDctCoefficients(e));void 0===this.result.dct&&(this.result.dct=xtract_dct_2(this.data,g));return this.result.dct}},autocorrelation:{value:function(){void 0===this.result.autocorrelation&&(this.result.autocorrelation=xtract_autocorrelation(this.data));
return this.result.autocorrelation}},amdf:{value:function(){void 0===this.result.amdf&&(this.result.amdf=xtract_amdf(this.data));return this.result.amdf}},asdf:{value:function(){void 0===this.result.asdf&&(this.result.asdf=xtract_asdf(this.data));return this.result.asdf}},yin:{value:function(){void 0===this.result.yin&&(this.result.yin=xtract_yin(this.data));return this.result.yin}},onset:{value:function(a){if(void 0===this.result.onset||this.result.onset.frameSize!==a)this.result.onset={data:xtract_onset(this.data,
a),frameSize:a};return this.result.onset}},resample:{value:function(a){if(void 0===f)throw"Source sampleRate must be defined";if("number"!==typeof a||0>=a)throw"Target sampleRate must be a positive number";var b=xtract_resample(this.data,a,f);a=new TimeData(b.length,a);a.copyDataFrom(b);return this.result.resample=a}}})};TimeData.prototype=Object.create(DataProto.prototype);TimeData.prototype.constructor=TimeData;
var SpectrumData=function(a,c,b){function d(){for(var b=0;b<a;b++)f[b]=b/a*(g/2)}if(void 0===a||0>=a)throw"SpectrumData constructor requires N to be a defined, whole number";void 0===c&&(c=Math.PI);DataProto.call(this,2*a,c);var e=this.data.subarray(0,a),f=this.data.subarray(a,2*a),g=c,h,k,l,m,p;d();this.zeroData=function(){this.zeroDataRange(0,a)};Object.defineProperties(this,{features:{get:function(){return this.constructor.prototype.features},set:function(){}},sampleRate:{get:function(){return g},
set:function(b){if(g===Math.PI)g=b,d(),l=xtract_init_bark(a,g);else throw"Cannot set one-time variable";}},f0:{get:function(){return h},set:function(a){"number"===typeof a&&(h=a);return h}},init_mfcc:{value:function(b,c,d,e){k=this.createMfccCoefficients(a,.5*g,e,c,d,b);this.result.mfcc=void 0;return k}},init_bark:{value:function(b){if("number"!==typeof b||0>b||26<b)b=26;return l=this.createBarkCoefficients(a,g,b)}},init_chroma:{value:function(b,c,d,e){if("number"!==typeof b||1>=b)b=12;if("number"!==
typeof c||27.5>=c)c=440;"number"!==typeof d&&(d=1E3);"number"!==typeof e&&(e=1);p=this.createChromaCoefficients(a,g,b,c,d,e);this.result.chroma=void 0;return p}},length:{value:a,writable:!1,enumerable:!0},minimum:{value:function(){void 0===this.result.minimum&&(this.result.minimum=xtract_array_min(e));return this.result.minimum}},maximum:{value:function(){void 0===this.result.maximum&&(this.result.maximum=xtract_array_max(e));return this.result.maximum}},sum:{value:function(){void 0===this.result.sum&&
(this.result.sum=xtract_array_sum(e));return this.result.sum}},spectral_centroid:{value:function(){void 0===this.result.spectral_centroid&&(this.result.spectral_centroid=xtract_spectral_centroid(this.data));return this.result.spectral_centroid}},spectral_mean:{value:function(){void 0===this.result.spectral_mean&&(this.result.spectral_mean=xtract_spectral_mean(this.data));return this.result.spectral_mean}},spectral_variance:{value:function(){void 0===this.result.spectral_variance&&(this.result.spectral_variance=
xtract_spectral_variance(this.data,this.spectral_centroid()));return this.result.spectral_variance}},spectral_spread:{value:function(){void 0===this.result.spectral_spread&&(this.result.spectral_spread=xtract_spectral_spread(this.data,this.spectral_centroid()));return this.result.spectral_spread}},spectral_standard_deviation:{value:function(){void 0===this.result.spectral_standard_deviation&&(this.result.spectral_standard_deviation=xtract_spectral_standard_deviation(this.data,this.spectral_variance()));
return this.result.spectral_standard_deviation}},spectral_skewness:{value:function(){void 0===this.result.spectral_skewness&&(this.result.spectral_skewness=xtract_spectral_skewness(this.data,this.spectral_centroid(),this.spectral_standard_deviation()));return this.result.spectral_skewness}},spectral_kurtosis:{value:function(){void 0===this.result.spectral_kurtosis&&(this.result.spectral_kurtosis=xtract_spectral_kurtosis(this.data,this.spectral_centroid(),this.spectral_standard_deviation()));return this.result.spectral_kurtosis}},
irregularity_k:{value:function(){void 0===this.result.irregularity_k&&(this.result.irregularity_k=xtract_irregularity_k(this.data));return this.result.irregularity_k}},irregularity_j:{value:function(){void 0===this.result.irregularity_j&&(this.result.irregularity_j=xtract_irregularity_j(this.data));return this.result.irregularity_j}},tristimulus_1:{value:function(){void 0===h&&this.spectral_fundamental();void 0===this.result.tristimulus_1&&(this.result.tristimulus_1=xtract_tristimulus_1(this.data,
h));return this.result.tristimulus_1}},tristimulus_2:{value:function(){void 0===h&&this.spectral_fundamental();void 0===this.result.tristimulus_2&&(this.result.tristimulus_2=xtract_tristimulus_2(this.data,h));return this.result.tristimulus_2}},tristimulus_3:{value:function(){void 0===h&&this.spectral_fundamental();void 0===this.result.tristimulus_3&&(this.result.tristimulus_3=xtract_tristimulus_3(this.data,h));return this.result.tristimulus_3}},smoothness:{value:function(){void 0===this.result.smoothness&&
(this.result.smoothness=xtract_smoothness(this.data));return this.result.smoothness}},rolloff:{value:function(a){void 0===this.result.rolloff&&(this.result.rolloff=xtract_rolloff(this.data,g,a));return this.result.rolloff}},loudness:{value:function(){void 0===this.result.loudness&&(this.result.loudness=xtract_loudness(this.bark_coefficients()));return this.result.loudness}},sharpness:{value:function(){void 0===this.result.sharpness&&(this.result.sharpness=xtract_sharpness(this.bark_coefficients()));
return this.result.sharpness}},flatness:{value:function(){void 0===this.result.flatness&&(this.result.flatness=xtract_flatness(this.data));return this.result.flatness}},flatness_db:{value:function(){void 0===this.result.flatness_db&&(this.result.flatness_db=xtract_flatness_db(this.data,this.flatness()));return this.result.flatness_db}},tonality:{value:function(){void 0===this.result.tonality&&(this.result.tonality=xtract_tonality(this.data,this.flatness_db()));return this.result.tonality}},spectral_crest_factor:{value:function(){void 0===
this.result.spectral_crest_factor&&(this.result.spectral_crest_factor=xtract_crest(e,this.maximum(),this.spectral_mean()));return this.result.spectral_crest_factor}},spectral_slope:{value:function(){void 0===this.result.spectral_slope&&(this.result.spectral_slope=xtract_spectral_slope(this.data));return this.result.spectral_slope}},spectral_fundamental:{value:function(){void 0===this.result.spectral_fundamental&&(this.result.spectral_fundamental=xtract_spectral_fundamental(this.data,g),this.f0=this.result.spectral_fundamental);
return this.result.spectral_fundamental}},nonzero_count:{value:function(){void 0===this.result.nonzero_count&&(this.result.nonzero_count=xtract_nonzero_count(e));return this.result.nonzero_count}},hps:{value:function(){void 0===this.result.hps&&(this.result.hps=xtract_hps(this.data));return this.result.hps}},mfcc:{value:function(a,b,c){if(void 0===k){if(void 0===b)throw"Run init_mfcc(num_bands, freq_min, freq_max, style) first";k=this.init_mfcc(a,b,c)}void 0===this.result.mfcc&&(this.result.mfcc=
xtract_mfcc(this.data,k));return this.result.mfcc}},dct:{value:function(){void 0===m&&(m=this.createDctCoefficients(a));void 0===this.result.dct&&(this.result.dct=xtract_dct_2(e,m));return this.result.dct}},bark_coefficients:{value:function(a){void 0===this.result.bark_coefficients&&(void 0===l&&(l=this.init_bark(a)),this.result.bark_coefficients=xtract_bark_coefficients(this.data,l));return this.result.bark_coefficients}},chroma:{value:function(a,b,c,d){void 0===this.result.chroma&&(void 0===p&&
(p=this.init_chroma(a,b,c,d)),this.result.chroma=xtract_chroma(this.data,p));return this.result.chroma}},peak_spectrum:{value:function(b){void 0===this.result.peak_spectrum&&(this.result.peak_spectrum=new PeakSpectrumData(a,g,this),b=xtract_peak_spectrum(this.data,g/a,b),this.result.peak_spectrum.copyDataFrom(b.subarray(0,a)));return this.result.peak_spectrum}}})};SpectrumData.prototype=Object.create(DataProto.prototype);SpectrumData.prototype.constructor=SpectrumData;
var PeakSpectrumData=function(a,c,b){if(void 0===a||0>=a)throw"SpectrumData constructor requires N to be a defined, whole number";void 0===c&&(c=Math.PI);SpectrumData.call(this,a);Object.defineProperties(this,{spectral_inharmonicity:{value:function(){void 0===this.result.spectral_inharmonicity&&(this.result.spectral_inharmonicity=xtract_spectral_inharmonicity(this.data,this.sampleRate));return this.result.spectral_inharmonicity}},harmonic_spectrum:{value:function(a){void 0===this.result.harmonic_spectrum&&
(void 0===this.f0&&this.spectral_fundamental(this.data,this.sampleRate),this.result.harmonic_spectrum=new HarmonicSpectrumData(this.length,this.sampleRate,this),a=xtract_harmonic_spectrum(this.data,this.f0,a),this.result.harmonic_spectrum.copyDataFrom(a.subarray(0,this.length)));return this.result.harmonic_spectrum}}})};PeakSpectrumData.prototype=Object.create(SpectrumData.prototype);PeakSpectrumData.prototype.constructor=PeakSpectrumData;
var HarmonicSpectrumData=function(a,c,b){void 0===a||0>=a?console.error("SpectrumData constructor requires N to be a defined, whole number"):(void 0===c&&(c=Math.PI),PeakSpectrumData.call(this,a),Object.defineProperties(this,{odd_even_ratio:{value:function(){void 0===this.result.odd_even_ratio&&(void 0===this.f0&&this.spectral_fundamental(this.data,this.sampleRate),this.result.odd_even_ratio=xtract_odd_even_ratio(this.data,this.f0));return this.result.odd_even_ratio}},noisiness:{value:function(){this.result.noisiness=
b.constructor!==PeakSpectrumData?null:xtract_noisiness(this.nonzero_count(),b.nonzero_count());return this.result.noisiness}}}))};HarmonicSpectrumData.prototype=Object.create(PeakSpectrumData.prototype);HarmonicSpectrumData.prototype.constructor=HarmonicSpectrumData;
TimeData.prototype.features=[{name:"Minimum","function":"minimum",sub_features:[],parameters:[],returns:"number"},{name:"Maximum","function":"maximum",sub_features:[],parameters:[],returns:"number"},{name:"Sum","function":"sum",sub_features:[],parameters:[],returns:"number"},{name:"Mean","function":"mean",sub_features:[],parameters:[],returns:"number"},{name:"Temporal Centroid","function":"temporal_centroid",sub_features:["energy"],parameters:[{name:"Window Time",unit:"ms",type:"number",minimum:1,
maximum:void 0,"default":100}],returns:"number"},{name:"Variance","function":"variance",sub_features:["mean"],parameters:[],returns:"number"},{name:"Standard Deviation","function":"standard_deviation",sub_features:["variance"],parameters:[],returns:"number"},{name:"Average Deviation","function":"average_deviation",sub_features:["mean"],parameters:[],returns:"number"},{name:"Skewness","function":"skewness",sub_features:["mean","standard_deviation"],parameters:[],returns:"number"},{name:"Kurtosis",
"function":"kurtosis",sub_features:["mean","standard_deviation"],parameters:[],returns:"number"},{name:"Zero Crossing Rate","function":"zcr",sub_features:[],parameters:[],returns:"number"},{name:"Crest Factor","function":"crest_factor",sub_features:["maximum","mean"],parameters:[],returns:"number"},{name:"RMS Amplitude","function":"rms_amplitude",sub_features:[],parameters:[],returns:"number"},{name:"Lowest Value","function":"lowest_value",sub_features:[],parameters:[{name:"Threshold",unit:"",type:"number",
minimum:void 0,maximum:void 0,"default":void 0}],returns:"number"},{name:"Highest Value","function":"highest_value",sub_features:[],parameters:[{name:"Threshold",unit:"",type:"number",minimum:void 0,maximum:void 0,"default":void 0}],returns:"number"},{name:"Non-Zero Count","function":"nonzero_count",sub_features:[],parameters:[],returns:"number"},{name:"Fundamental Frequency","function":"f0",sub_features:[],parameters:[],returns:"number"},{name:"Energy","function":"energy",sub_features:[],parameters:[{name:"Window",
unit:"ms",type:"number",minimum:1,maximum:void 0,"default":100}],returns:"object"},{name:"Spectrum","function":"spectrum",sub_features:[],parameters:[],returns:"SpectrumData"},{name:"DCT","function":"dct",sub_features:[],parameters:[],returns:"array"},{name:"Autocorrelation","function":"autocorrelation",sub_features:[],parameters:[],returns:"array"},{name:"AMDF","function":"amdf",sub_features:[],parameters:[],returns:"array"},{name:"ASDF","function":"asdf",sub_features:[],parameters:[],returns:"array"},
{name:"YIN Pitch","function":"yin",sub_features:[],parameters:[],returns:"array"},{name:"Onset Detection","function":"onset",sub_features:[],parameters:[{name:"Frame Size",unit:"samples",type:"number",minimum:1,maximum:void 0,"default":1024}],returns:"array"},{name:"Resample","function":"resample",sub_features:[],parameters:[{name:"Target Sample Rate",unit:"Hz",type:"number",minimum:0,maximum:void 0,"default":8E3}],returns:"TimeData"}];
SpectrumData.prototype.features=[{name:"Minimum","function":"minimum",sub_features:[],parameters:[],returns:"number"},{name:"Maximum","function":"maximum",sub_features:[],parameters:[],returns:"number"},{name:"Sum","function":"sum",sub_features:[],parameters:[],returns:"number"},{name:"Spectral Centroid","function":"spectral_centroid",sub_features:[],parameters:[],returns:"number"},{name:"Spectral Mean","function":"spectral_mean",sub_features:[],parameters:[],returns:"number"},{name:"Spectral Variance",
"function":"spectral_variance",sub_features:["spectral_mean"],parameters:[],returns:"number"},{name:"Spectral Spread","function":"spectral_spread",sub_features:["spectral_centroid"],parameters:[],returns:"number"},{name:"Spectral Standard Deviation","function":"spectral_standard_deviation",sub_features:["spectral_variance"],parameters:[],returns:"number"},{name:"Spectral Skewness","function":"spectral_skewness",sub_features:["spectral_mean","spectral_standard_deviation"],parameters:[],returns:"number"},
{name:"Spectral Kurtosis","function":"spectral_kurtosis",sub_features:["spectral_mean","spectral_standard_deviation"],parameters:[],returns:"number"},{name:"Irregularity K","function":"irregularity_k",sub_features:[],parameters:[],returns:"number"},{name:"Irregularity J","function":"irregularity_j",sub_features:[],parameters:[],returns:"number"},{name:"Tristimulus 1","function":"tristimulus_1",sub_features:["spectral_fundamental"],parameters:[],returns:"number"},{name:"Tristimulus 2","function":"tristimulus_2",
sub_features:["spectral_fundamental"],parameters:[],returns:"number"},{name:"Tristimulus 3","function":"tristimulus_3",sub_features:["spectral_fundamental"],parameters:[],returns:"number"},{name:"Smoothness","function":"smoothness",sub_features:[],parameters:[],returns:"number"},{name:"Rolloff","function":"rolloff",sub_features:[],parameters:[{name:"Threshold",unit:"%",type:"number",minimum:0,maximum:100,"default":90}],returns:"number"},{name:"Loudness","function":"loudness",sub_features:["bark_coefficients"],
parameters:[],returns:"number"},{name:"Sharpness","function":"sharpness",sub_features:["bark_coefficients"],parameters:[],returns:"number"},{name:"Flatness","function":"flatness",sub_features:[],parameters:[],returns:"number"},{name:"Flatness DB","function":"flatness_db",sub_features:["flatness"],parameters:[],returns:"number"},{name:"Tonality","function":"tonality",sub_features:["flatness_db"],parameters:[],returns:"number"},{name:"Spectral Crest Factor","function":"spectral_crest_factor",sub_features:["maximum",
"spectral_mean"],parameters:[],returns:"number"},{name:"Spectral Slope","function":"spectral_slope",sub_features:[],parameters:[],returns:"number"},{name:"Fundamental Frequency","function":"spectral_fundamental",sub_features:[],parameters:[],returns:"number"},{name:"Non-Zero count","function":"nonzero_count",sub_features:[],parameters:[],returns:"number"},{name:"HPS","function":"hps",sub_features:[],parameters:[],returns:"number"},{name:"MFCC","function":"mfcc",sub_features:[],parameters:[{name:"Band Count",
unit:"",type:"number",minimum:0,maximum:void 0,"default":26},{name:"Minimum Frequency",unit:"Hz",type:"number",minimum:0,maximum:void 0,"default":400},{name:"Maximum Frequency",unit:"Hz",minimum:0,maximum:void 0,"default":2E4}],returns:"array"},{name:"Chroma","function":"chroma",sub_features:[],parameters:[{name:"nbins",unit:"",type:"number",minimum:2,maximum:void 0,"default":12},{name:"A440",unit:"",type:"number",minimum:220,maximum:880,"default":440},{name:"f_ctr",unit:"",type:"number",minimum:void 0,
maximum:void 0,"default":1E3},{name:"octwidth",unit:"",type:"number",minimum:void 0,maximum:void 0,"default":1}],returns:"array"},{name:"DCT","function":"dct",sub_features:[],parameters:[],returns:"array"},{name:"Bark Coefficients","function":"bark_coefficients",sub_features:[],parameters:[{name:"Band Count",unit:"",type:"number",minimum:0,maximum:26,"default":26}],returns:"array"},{name:"Peak Spectrum","function":"peak_spectrum",sub_features:[],parameters:[{name:"Threshold",unit:"",type:"number",
minimum:0,maximum:100,"default":30}],returns:"PeakSpectrumData"}];PeakSpectrumData.prototype.features=SpectrumData.prototype.features.concat([{name:"Spectral Inharmonicity","function":"spectral_inharmonicity",sub_features:["f0"],parameters:[],returns:"number"},{name:"Harmonic Spectrum","function":"harmonic_spectrum",sub_features:[],parameters:[{name:"Threshold",unit:"",type:"number",minimum:0,maximum:100,"default":30}],returns:"HarmonicSpectrumData"}]);
HarmonicSpectrumData.prototype.features=PeakSpectrumData.prototype.features.concat([{name:"Odd Even Ration","function":"odd_even_ratio",sub_features:[],parameters:[],returns:"number"}]);
"undefined"!==typeof AnalyserNode&&(AnalyserNode.prototype.timeData=void 0,AnalyserNode.prototype.spectrumData=void 0,AnalyserNode.prototype.callbackObject=void 0,AnalyserNode.prototype.fooGain=void 0,AnalyserNode.prototype.getXtractData=function(){if(void 0===this.timeData||void 0===this.scpectrumData)this.timeData=new TimeData(this.fftSize,this.context.sampleRate),this.spectrumData=new SpectrumData(this.frequencyBinCount,this.context.sampleRate);var a=new Float32Array(this.fftSize),c;if(this.getFloatTimeDomainData)this.getFloatTimeDomainData(a);
else{var b=new Uint8Array(this.fftSize);this.getByteTimeDomainData(b);for(c=0;c<this.fftSize;c++)a[c]=b[c],a[c]=a[c]/127.5-1}this.timeData.copyDataFrom(a);this.timeData.result.spectrum=this.spectrumData;a=new Float32Array(this.frequencyBinCount);this.getFloatFrequencyData(a);for(c=0;c<this.frequencyBinCount;c++)a[c]=Math.pow(10,a[c]/20);this.spectrumData.copyDataFrom(a);return this.timeData},AnalyserNode.prototype.previousFrame=void 0,AnalyserNode.prototype.previousResult=void 0,AnalyserNode.prototype.frameCallback=
function(a,c){void 0===this.callbackObject&&(this.callbackObject=this.context.createScriptProcessor(this.fftSize,1,1),this.connect(this.callbackObject));var b=this;this.callbackObject.onaudioprocess=function(d){var e=b.getXtractData();this.previousResult=a.call(c,e,this.previousFrame,this.previousResult);this.previousFrame=e;e=d.outputBuffer.length;var f=new Float32Array(e),g=this.previousResult;"number"!==typeof this.previousResult&&(g=0);for(var h=0;h<e;h++)f[h]=g;d.outputBuffer.copyToChannel(f,
0,0)};this.fooGain||(this.fooGain=this.context.createGain(),this.fooGain.gain.value=0,this.callbackObject.connect(this.fooGain),this.fooGain.connect(this.context.destination))},AnalyserNode.prototype.clearCallback=function(){this.disconnect(this.callbackObject);this.callbackObject.onaudioprocess=void 0},AnalyserNode.prototype.xtractFrame=function(a,c){a.call(c,this.getXtractData())});
"undefined"!==typeof AudioBuffer&&(AudioBuffer.prototype.xtract_get_data_frames=function(a,c){void 0===c&&(c=a);if(!xtract_assert_positive_integer(a))throw"xtract_get_data_frames requires the frame_size to be defined, positive integer";if(!xtract_assert_positive_integer(c))throw"xtract_get_data_frames requires the hop_size to be a positive integer";this.frames=[];for(var b=this.xtract_get_number_of_frames(c),d=0;d<this.numberOfChannels;d++){var e=this.getChannelData(d);this.frames[d]=[];for(var f=
0;f<b;f++){var g=new TimeData(a,this.sampleRate);g.copyDataFrom(e.subarray(c*f,c*f+a));this.frames[d].push(g)}}return this.frames},AudioBuffer.prototype.xtract_get_number_of_frames=function(a){return xtract_get_number_of_frames(this,a)},AudioBuffer.prototype.xtract_get_frame=function(a,c,b,d){if("object"!==typeof a||a.constructor!==Float32Array)throw"dst must be a Float32Array object equal in length to hop_size";if(!xtract_assert_positive_integer(c))throw"xtract_get_frame requires the channel to be an integer value";
if(!xtract_assert_positive_integer(b))throw"xtract_get_frame requires the index to be an integer value";if(!xtract_assert_positive_integer(d))throw"xtract_get_frame requires the frame_size to be defined, positive integer";if(0>c||c>this.numberOfChannels)throw"channel number "+c+" out of bounds";var e=this.xtract_get_number_of_frames(d);if(0>b||b>=e)throw"index number "+b+" out of bounds";return this.copyFromChannel(a,c,d*b)},AudioBuffer.prototype.xtract_process_frame_data=function(){throw"AudioBuffer::xtract_process_frame_data has been deprecated";
});